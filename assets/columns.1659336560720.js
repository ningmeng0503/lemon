import{K as F,i as R,s as b,aE as V,aI as E,a2 as U,j as z,l as J,H as K,aJ as W,a5 as Y,k as Z,n as q,a6 as u,o as f,a as H,Z as c,S as g,b as h,F as G,a9 as Q,M as _,Y as B,m as X,R as S,W as O}from"./vue.1659336560720.js";import{d as ee,u as T,a7 as te,_ as D}from"./index.1659336560720.js";import{A as se}from"./aside.1659336560720.js";import{H as oe,M as ne}from"./main.1659336560720.js";import"./logo-mini.1659336560720.js";import"./sortable.esm.1659336560720.js";import"./parent.1659336560720.js";const le=F({name:"layoutColumnsAside",setup(){const e=R([]),d=R(),{proxy:i}=Z(),p=ee(),$=T(),{routesList:M,isColumnsMenuHover:C,isColumnsNavHover:A}=b(p),{themeConfig:o}=b($),a=V(),m=E(),s=U({columnsAsideList:[],liIndex:0,liOldIndex:null,liHoverIndex:null,liOldPath:null,difference:0,routeSplit:[]}),v=t=>{s.liIndex=t,d.value.style.top=`${e.value[t].offsetTop+s.difference}px`},k=(t,n)=>{v(n);let{path:l,redirect:r}=t;r?m.push(r):m.push(l)},N=(t,n)=>{let{path:l}=t;s.liOldPath=l,s.liOldIndex=n,s.liHoverIndex=n,i.mittBus.emit("setSendColumnsChildren",y(l)),p.setColumnsMenuHover(!1),p.setColumnsNavHover(!0)},w=async()=>{await p.setColumnsNavHover(!1),setTimeout(()=>{!C&&!A&&i.mittBus.emit("restoreDefault")},100)},I=t=>{q(()=>{v(t)})},P=()=>{s.columnsAsideList=L(M.value);const t=y(a.path);if(Object.keys(t).length<=0)return!1;I(t.item[0].k),i.mittBus.emit("setSendColumnsChildren",t)},y=t=>{const n=t.split("/");let l={};return s.columnsAsideList.map((r,j)=>{r.path===`/${n[1]}`&&(r.k=j,l.item=[{...r}],l.children=[{...r}],r.children&&(l.children=r.children))}),l},L=t=>t.filter(n=>!n.meta.isHide).map(n=>(n=Object.assign({},n),n.children&&(n.children=L(n.children)),n)),x=t=>{s.routeSplit=t.split("/"),s.routeSplit.shift();const n=`/${s.routeSplit[0]}`,l=s.columnsAsideList.find(r=>r.path===n);if(!l)return!1;setTimeout(()=>{I(l.k)},0)};return z(te.state,t=>{if(t.themeConfig.themeConfig.columnsAsideStyle==="columnsRound"?s.difference=3:s.difference=0,!t.routesList.isColumnsMenuHover&&!t.routesList.isColumnsNavHover)s.liHoverIndex=null,i.mittBus.emit("setSendColumnsChildren",y(a.path));else{if(s.liHoverIndex=s.liOldIndex,!s.liOldPath)return!1;i.mittBus.emit("setSendColumnsChildren",y(s.liOldPath))}},{deep:!0}),J(()=>{P(),i.mittBus.on("restoreDefault",()=>{s.liOldIndex=null,s.liOldPath=null})}),K(()=>{i.mittBus.off("restoreDefault",()=>{})}),W(t=>{x(t.path),i.mittBus.emit("setSendColumnsChildren",y(t.path))}),{themeConfig:o,columnsAsideOffsetTopRefs:e,columnsAsideActiveRef:d,onColumnsAsideDown:I,onColumnsAsideMenuClick:k,onColumnsAsideMenuMouseenter:N,onColumnsAsideMenuMouseleave:w,...Y(s)}}}),ie={class:"layout-columns-aside"},ae=["onClick","onMouseenter","title"],re={class:"columns-vertical-title font12"},ue=["href"],me={class:"columns-vertical-title font12"};function ce(e,d,i,p,$,M){const C=u("SvgIcon"),A=u("el-scrollbar");return f(),H("div",ie,[c(A,null,{default:g(()=>[h("ul",{onMouseleave:d[0]||(d[0]=o=>e.onColumnsAsideMenuMouseleave())},[(f(!0),H(G,null,Q(e.columnsAsideList,(o,a)=>(f(),H("li",{key:a,onClick:m=>e.onColumnsAsideMenuClick(o,a),onMouseenter:m=>e.onColumnsAsideMenuMouseenter(o,a),ref_for:!0,ref:m=>{m&&(e.columnsAsideOffsetTopRefs[a]=m)},class:_({"layout-columns-active":e.liIndex===a,"layout-columns-hover":e.liHoverIndex===a}),title:e.$t(o.meta.title)},[!o.meta.isLink||o.meta.isLink&&o.meta.isIframe?(f(),H("div",{key:0,class:_(e.themeConfig.columnsAsideLayout)},[c(C,{name:o.meta.icon},null,8,["name"]),h("div",re,B(e.$t(o.meta.title)&&e.$t(o.meta.title).length>=4?e.$t(o.meta.title).substr(0,e.themeConfig.columnsAsideLayout==="columns-vertical"?4:3):e.$t(o.meta.title)),1)],2)):(f(),H("div",{key:1,class:_(e.themeConfig.columnsAsideLayout)},[h("a",{href:o.meta.isLink,target:"_blank"},[c(C,{name:o.meta.icon},null,8,["name"]),h("div",me,B(e.$t(o.meta.title)&&e.$t(o.meta.title).length>=4?e.$t(o.meta.title).substr(0,e.themeConfig.columnsAsideLayout==="columns-vertical"?4:3):e.$t(o.meta.title)),1)],8,ue)],2))],42,ae))),128)),h("div",{ref:"columnsAsideActiveRef",class:_(e.themeConfig.columnsAsideStyle)},null,2)],32)]),_:1})])}var de=D(le,[["render",ce],["__scopeId","data-v-07532e16"]]);const fe=F({name:"layoutColumns",components:{AsideCom:se,HeaderCom:oe,MainCom:ne,ColumnsAside:de},setup(){const e=T(),{themeConfig:d}=b(e);return{isFixedHeader:X(()=>d.value.isFixedHeader)}}}),pe={class:"layout-columns-warp"};function Ce(e,d,i,p,$,M){const C=u("ColumnsAside"),A=u("AsideCom"),o=u("HeaderCom"),a=u("Header"),m=u("MainCom"),s=u("el-scrollbar"),v=u("el-container"),k=u("el-backtop");return f(),S(v,{class:"layout-container"},{default:g(()=>[c(C),h("div",pe,[c(A),c(v,{class:_(["flex-center layout-backtop",{"layout-backtop":!e.isFixedHeader}])},{default:g(()=>[e.isFixedHeader?(f(),S(o,{key:0})):O("",!0),c(s,{class:_({"layout-backtop":e.isFixedHeader})},{default:g(()=>[e.isFixedHeader?O("",!0):(f(),S(a,{key:0})),c(m)]),_:1},8,["class"])]),_:1},8,["class"])]),c(k,{target:".layout-backtop .el-scrollbar__wrap"})]),_:1})}var $e=D(fe,[["render",Ce]]);export{$e as default};
